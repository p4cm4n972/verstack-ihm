@let isAuth = authStatus$ | async;

<div class="container" [class.bg-loaded]="bgLoaded">
  <div class="row">
    <div class="col left">
      <div class="text-content">
        <span class="pixel-art-title">verstack.io</span>
        @if (!isAuth) {
        <h2 id="heading">Votre plateforme de veille technologique</h2>
        } @if (!isAuth) {
        <p class="pixel-art-subtitle">
          Explorez les dernières versions, références et tendances<br />
          pour rester à jour.
        </p>
        } @if (isAuth) {
        <ng-container>
          <hr class="divider" />
          <div class="dashboard-container">
            <div class="dashboard-header">
              <h2 class="dashboard-title">
                <span class="title-icon">▶</span>
                <div class="glitch" data-text="TABLEAU DE BORD">
                  TABLEAU DE BORD
                </div>
                <span class="title-decoration">_</span>
              </h2>
              <div class="status-indicator">
                <span class="status-dot online"></span>
                <span class="status-text">ONLINE</span>
              </div>
            </div>

            <div class="terminal-display">
              <div class="terminal-line">
                <span class="terminal-prompt">$</span>
                <span class="terminal-command">whoami</span>
              </div>
              <div class="terminal-output">
                <span class="output-label">user:</span>
                <span class="output-value">{{ userData?.pseudo ?? "guest" }}</span>
                <span class="output-tag level-tag">&#91;PRO&#93;</span>
              </div>

              <div class="terminal-line">
                <span class="terminal-prompt">$</span>
                <span class="terminal-command">network --status</span>
              </div>
              <div class="terminal-output">
                <span class="output-label">online:</span>
                <span class="output-value online-count">{{ userData?.friendsOnline ?? 0 }}</span>
                <span class="output-separator">/</span>
                <span class="output-value">{{ userData?.totalFriends ?? 0 }}</span>
                <span class="output-unit">users</span>
              </div>

              <div class="terminal-line">
                <span class="terminal-prompt">$</span>
                <span class="terminal-command">ls projects/</span>
              </div>
              <div class="terminal-output">
                <span class="output-label">active:</span>
                <span class="output-value projects-count">{{ userData?.projects?.length ?? 0 }}</span>
                <span class="output-unit">projects</span>
                <div class="progress-bar-terminal">
                  <div class="progress-fill-terminal" [style.width.%]="(userData?.projects?.length ?? 0) * 10"></div>
                </div>
              </div>

              <div class="terminal-line">
                <span class="terminal-prompt">$</span>
                <span class="terminal-command">mail --unread</span>
              </div>
              <div class="terminal-output">
                <span class="output-label">inbox:</span>
                <span class="output-value messages-count" [class.has-messages]="(userData?.unreadMessages ?? 0) > 0">
                  {{ userData?.unreadMessages ?? 0 }}
                </span>
                <span class="output-unit">messages</span>
                @if((userData?.unreadMessages ?? 0) > 0) {
                  <span class="notification-badge">!</span>
                }
              </div>

              <div class="terminal-cursor">_</div>
            </div>
          </div>
        </ng-container>
        } @if (!isAuth) {
        <div class="button-container">
          <a class="btn" href="/version">Découvrir</a>
          <a class="btn" routerLink="/signup" routerLinkActive="active"
            >Connexion</a
          >
        </div>
        }
      </div>
    </div>

    @if (!isAuth || userFavoris?.length == 0 ) {
    <ng-container>
      <div class="col right hide-on-small">
        <app-globe></app-globe>
      </div>
    </ng-container>
    } @else {
    <ng-container>
      <div class="col right">
        <app-user-tech-preview></app-user-tech-preview>
      </div>
    </ng-container>

    }
  </div>
</div>
