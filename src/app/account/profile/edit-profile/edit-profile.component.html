<div class="edit-profile-modal">
  <div class="modal-header">
    <h2>
      <mat-icon>edit</mat-icon>
      Modifier le Profil
    </h2>
    <button mat-icon-button (click)="dialogRef.close()" class="close-btn">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="profileForm" (ngSubmit)="saveChanges()">
    <!-- Avatar Section -->
    <div class="avatar-section">
      <div class="avatar-container">
        <img [src]="selectedFile || profilePicture || 'https://placehold.co/120x120'" class="avatar-preview" alt="Avatar">
        <div class="avatar-overlay" (click)="fileInput.click()">
          <mat-icon>camera_alt</mat-icon>
          <span>Changer</span>
        </div>
        <input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" hidden>
      </div>
      <div class="avatar-info">
        <p class="avatar-title">Photo de profil</p>
        <p class="avatar-hint">Cliquez pour changer votre avatar</p>
      </div>
    </div>

    <!-- Form Fields Grid -->
    <div class="form-grid">
      <mat-form-field appearance="outline">
        <mat-label>Pseudo</mat-label>
        <input matInput formControlName="pseudo" required>
        <mat-icon matPrefix>person</mat-icon>
        <mat-error>Le pseudo est requis</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email">
        <mat-icon matPrefix>email</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Pr√©nom</mat-label>
        <input matInput formControlName="firstName">
        <mat-icon matPrefix>badge</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Nom</mat-label>
        <input matInput formControlName="lastName">
        <mat-icon matPrefix>badge</mat-icon>
      </mat-form-field>
    </div>

    <!-- Action Buttons -->
    <div class="modal-actions">
      <button mat-stroked-button type="button" (click)="dialogRef.close()">
        <mat-icon>close</mat-icon>
        Annuler
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!profileForm.valid">
        <mat-icon>save</mat-icon>
        Enregistrer
      </button>
    </div>
  </form>
</div>